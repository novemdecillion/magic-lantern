<mat-card>
  <mat-card-header class="bg-primary bg-gradient text-light">
    <mat-card-title class="my-1" >
      <ng-container *ngTemplateOutlet="titleTemplateRef || defaultTitle"></ng-container>
    </mat-card-title>

    <button mat-mini-fab matTooltip="再ロード" class="ms-auto" (click)="onLoadData()">
      <span class="mdi mdi-sync mdi-spin" [class.mdi-spin]="isLoading"></span>
    </button>
  </mat-card-header>

  <mat-card-content>

    <table mat-table [dataSource]="dataSource" matSort matSortDirection="asc" class="w-100">

      <caption *ngIf="enableFilter" style="caption-side: right; text-align: end;">
        <mat-form-field>
          <input type="text" matInput placeholder="検索" #filterInput (keyup)="applyFilter(filterInput.value)" >
        </mat-form-field>
      </caption>

      <ng-container *ngFor="let column of columns; let i = index" matColumnDef="{{ column.name }}"
          [sticky]="column.sticky === 'start'" [stickyEnd]="column.sticky === 'end'">
        <th mat-header-cell *matHeaderCellDef mat-sort-header="{{ column.name }}" [disabled]="column.sort === false">
          {{ (column.displayName === null)? '' : (column.displayName || column.name) }}
        </th>
        <td mat-cell *matCellDef="let row">
          <ng-container *ngTemplateOutlet="column.cellTemplate || defaultTextCell; context:{column: column, row: row}"></ng-container>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    </table>
    <mat-paginator
      [pageSize]="20"
      [pageSizeOptions]="[20, 50, 100]" showFirstLastButtons>
    </mat-paginator>
  </mat-card-content>
</mat-card>

<ng-template #defaultTitle>
</ng-template>

<ng-template #defaultTextCell let-column="column" let-row="row">
  {{ defaultDisplayValue(column, row) }}
</ng-template>
